
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>startupbattle</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  </head>
  <body>
    <div id="app"></div>

   <script>
    
   function list_to_tree(list) {
    var map = {}, node, roots = [], i;
    for (i = 0; i < list.length; i += 1) {
        map[list[i].id] = i; // initialize the map
        list[i].children = []; // initialize the children
    }

    for (i = 0; i < list.length; i += 1) {
        node = list[i];
        console.log("1### parentId=" + node.parentId);
        if (node.parentId !== "0") {
            console.log("### parentId != 0");
            // if you have dangling branches check that map[node.parentId] exists
            list[map[node.parentId]].children.push(node);
        } 
        else {
            console.log("### parentId=0");
            roots.push(node);
        }
    }

    return roots;
}

var entries1 = [
    {
        "id": "1",
        "parentId": "0",
        "text": "Man1",
        "level": "1"
    }, 
    {
        "id": "2",
        "parentId": "0",
        "text": "Man2",
        "level": "1"
    }, 
    {
        "id": "3",
        "parentId": "0",
        "text": "Man3",
        "level": "1"
    }, 
    {
        "id": "11",
        "parentId": "1",
        "text": "Man11",
        "level": "2"
    }, 
    {
        "id": "12",
        "parentId": "1",
        "text": "Man12",
        "level": "2"
    }, 
    {
        "id": "21",
        "parentId": "2",
        "text": "Man21",
        "level": "2"
    }, 
    {
        "id": "22",
        "parentId": "2",
        "text": "Man21",
        "level": "2"
    },
    {
        "id": "121",
        "parentId": "12",
        "text": "Man121",
        "level": "3"
    }
  


];
var entries0 = [
    {
        "id": "1",
        "parentId": "0",
        "text": "Man1",
        "level": "1"
    }, 
    {
        "id": "2",
        "parentId": "0",
        "text": "Man2",
        "level": "1"
    }, 
    {
        "id": "3",
        "parentId": "0",
        "text": "Man3",
        "level": "1"
    }, 
    {
        "id": "11",
        "parentId": "1",
        "text": "Man11",
        "level": "2"
    }, 
    {
        "id": "12",
        "parentId": "1",
        "text": "Man12",
        "level": "2"
    }, 
    {
        "id": "21",
        "parentId": "2",
        "text": "Man21",
        "level": "2"
    }, 
    {
        "id": "22",
        "parentId": "2",
        "text": "Man21",
        "level": "2"
    },
    {
        "id": "111",
        "parentId": "111111",
        "text": "Man11",
        "level": "2"
    }, 
  


];

var entries2 = [
                    {
                    id: 1,
                    name: 'Portfolio',
                    parent_id: 0
                    },
                    {
                    id: 2,
                    name: 'Web Development',
                    parent_id: 1
                    },
                    {
                    id: 3,
                    name: 'Recent Works',
                    parent_id: 2
                    },
                    {
                    id: 4,
                    name: 'About Me',
                    parent_id: 0
                    }
                 ];

var tree = list_to_tree(entries1);

document.getElementById("app").innerHTML = "<h2>Tree</h2><pre>" +  (JSON.stringify(tree, null, " ")) +"</pre>";

console.log(list_to_tree(entries1));
   </script>
  </body>
</html>



